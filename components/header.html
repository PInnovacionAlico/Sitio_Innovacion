<!-- Header fijo con navegación y dropdowns - Rutas dinámicas -->
<header class="header">
    <!-- Botón de menú móvil -->
    <button class="menu-toggle" onclick="toggleMenu()" aria-label="Abrir menú de navegación">
        <span></span>
        <span></span>
        <span></span>
    </button>
    
    <!-- Logo de Alico -->
    <a href="#" class="logo" id="logoLink" aria-label="Ir a página principal de Alico">
        <img src="#" 
             alt="Ali Head Logo" 
             class="logo-image"
             id="logoImage"
             onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">
        <span class="logo-text-fallback">a</span>
    </a>

    <!-- Navegación de escritorio con dropdowns -->
    <nav class="desktop-nav" aria-label="Navegación principal">
        <div class="nav-links">
            <!-- Generalidades SGI - Sin dropdown -->
            <a href="#" class="nav-link" id="sgiLink">
                <span class="material-symbols-rounded nav-link-icon">analytics</span>
                <span>SGI</span>
            </a>

            <!-- Inteligencias Artificiales - Sin dropdown -->
            <a href="#" class="nav-link" id="iaLink">
                <span class="material-symbols-rounded nav-link-icon">psychology</span>
                <span>IA</span>
            </a>

            <!-- Recursos Audiovisuales - Con dropdown -->
            <div class="nav-dropdown" onmouseenter="showDropdown(this)" onmouseleave="hideDropdown(this)">
                <a href="#" class="nav-link nav-link-dropdown" id="recursosLink">
                    <span class="material-symbols-rounded nav-link-icon">video_library</span>
                    <span>Recursos</span>
                    <span class="material-symbols-rounded dropdown-arrow">keyboard_arrow_down</span>
                </a>
                <div class="dropdown-menu" role="menu">
                    <a href="#" class="dropdown-item" role="menuitem" id="videosFotosLink">
                        <span class="material-symbols-rounded dropdown-icon">photo_library</span>
                        <span>Videos y fotos</span>
                    </a>
                    <a href="#" class="dropdown-item" role="menuitem" id="embajadorLink">
                        <span class="material-symbols-rounded dropdown-icon">support_agent</span>
                        <span>Embajador Ali</span>
                    </a>
                    <a href="#" class="dropdown-item" role="menuitem" id="podcastLink">
                        <span class="material-symbols-rounded dropdown-icon">podcasts</span>
                        <span>Podcast</span>
                    </a>
                    <a href="https://drive.google.com/drive/folders/1cta6-8qxjOgrtVFEIxCcal72YbTfmnKf?usp=sharing" 
                       class="dropdown-item" target="_blank" rel="noopener noreferrer" role="menuitem">
                        <span class="material-symbols-rounded dropdown-icon">description</span>
                        <span>Plantillas pptx</span>
                        <span class="material-symbols-rounded external-link">open_in_new</span>
                    </a>
                </div>
            </div>

            <!-- Iniciativas - Con dropdown -->
            <div class="nav-dropdown" onmouseenter="showDropdown(this)" onmouseleave="hideDropdown(this)">
                <a href="#" class="nav-link nav-link-dropdown" id="iniciativasLink">
                    <span class="material-symbols-rounded nav-link-icon">lightbulb</span>
                    <span>Iniciativas</span>
                    <span class="material-symbols-rounded dropdown-arrow">keyboard_arrow_down</span>
                </a>
                <div class="dropdown-menu" role="menu">
                    <a href="https://experiencia-alico.firebaseapp.com/" class="dropdown-item" target="_blank" rel="noopener noreferrer" role="menuitem">
                        <span class="material-symbols-rounded dropdown-icon">inventory_2</span>
                        <span>Diseña tu empaque</span>
                        <span class="material-symbols-rounded external-link">open_in_new</span>
                    </a>
                    <a href="https://docs.google.com/forms/d/e/1FAIpQLScfJWsXOj-BAAgG9tmxYFf4QEuOimOmJJPsF4bnxmquUParZA/viewform?usp=sharing&ouid=102976851646670750896" 
                       class="dropdown-item" target="_blank" rel="noopener noreferrer" role="menuitem">
                        <span class="material-symbols-rounded dropdown-icon">assignment</span>
                        <span>Banco de iniciativas</span>
                        <span class="material-symbols-rounded external-link">open_in_new</span>
                    </a>
                    <a href="https://pinnovacion4.wixsite.com/alico---innovacion" target="_blank" rel="noopener noreferrer" class="dropdown-item" role="menuitem">
                        <span class="material-symbols-rounded dropdown-icon">article</span>
                        <span>Noticias</span>
                    </a>
                    <a href="#" class="dropdown-item" role="menuitem" id="designThinkingLink">
                        <span class="material-symbols-rounded dropdown-icon">psychology</span>
                        <span>Design Thinking</span>
                    </a>
                </div>
            </div>

            <!-- Blog -->
            <a href="https://pinnovacion4.wixsite.com/alico---innovacion" 
               target="_blank" rel="noopener noreferrer" class="nav-link">
                <span class="material-symbols-rounded nav-link-icon">article</span>
                <span>Blog</span>
            </a>
        </div>
    </nav>

    <!-- Botón de banco de iniciativas en el header (solo visible en móvil como fallback) -->
    <a href="https://docs.google.com/forms/d/e/1FAIpQLScfJWsXOj-BAAgG9tmxYFf4QEuOimOmJJPsF4bnxmquUParZA/viewform?usp=sharing&ouid=102976851646670750896" 
       class="header-banner-btn mobile-only" target="_blank" rel="noopener noreferrer">
        <span class="material-symbols-rounded">lightbulb</span>
        <span>Banco de iniciativas</span>
        <span class="material-symbols-rounded" style="font-size: 16px;">open_in_new</span>
    </a>
</header>

<!-- Menú de navegación móvil con acordeón -->
<nav class="mobile-nav-menu" id="mobileNavMenu" aria-label="Menú de navegación móvil">
    <div class="mobile-nav-grid">
        <!-- Generalidades SGI -->
        <a href="#" class="mobile-nav-item" id="mobileSgiLink">
            <div class="material-symbols-rounded mobile-nav-icon">analytics</div>
            <div class="mobile-nav-title">SGI</div>
        </a>

        <!-- Inteligencias Artificiales -->
        <a href="#" class="mobile-nav-item" id="mobileIaLink">
            <div class="material-symbols-rounded mobile-nav-icon">psychology</div>
            <div class="mobile-nav-title">IA</div>
        </a>

        <!-- Recursos Audiovisuales - Con submenu acordeón -->
        <div class="mobile-nav-item mobile-nav-dropdown" onclick="toggleMobileDropdown(this)">
            <div class="mobile-nav-header">
                <div class="material-symbols-rounded mobile-nav-icon">video_library</div>
                <div class="mobile-nav-title">Recursos</div>
                <div class="material-symbols-rounded mobile-dropdown-arrow">keyboard_arrow_down</div>
            </div>
            <div class="mobile-dropdown-content">
                <a href="#" class="mobile-dropdown-link" id="mobileVideosFotosLink">
                    <span class="material-symbols-rounded">photo_library</span>
                    <span>Videos y fotos</span>
                </a>
                <a href="#" class="mobile-dropdown-link" id="mobileEmbajadorLink">
                    <span class="material-symbols-rounded">support_agent</span>
                    <span>Embajador Ali</span>
                </a>
                <a href="#" class="mobile-dropdown-link" id="mobilePodcastLink">
                    <span class="material-symbols-rounded">podcasts</span>
                    <span>Podcast</span>
                </a>
                <a href="https://drive.google.com/drive/folders/1cta6-8qxjOgrtVFEIxCcal72YbTfmnKf?usp=sharing" 
                   class="mobile-dropdown-link" target="_blank" rel="noopener noreferrer">
                    <span class="material-symbols-rounded">description</span>
                    <span>Plantillas pptx</span>
                    <span class="mobile-nav-external">↗</span>
                </a>
            </div>
        </div>

        <!-- Iniciativas - Con submenu acordeón -->
        <div class="mobile-nav-item mobile-nav-dropdown" onclick="toggleMobileDropdown(this)">
            <div class="mobile-nav-header">
                <div class="material-symbols-rounded mobile-nav-icon">lightbulb</div>
                <div class="mobile-nav-title">Iniciativas</div>
                <div class="material-symbols-rounded mobile-dropdown-arrow">keyboard_arrow_down</div>
            </div>
            <div class="mobile-dropdown-content">
                <a href="https://experiencia-alico.firebaseapp.com/" class="mobile-dropdown-link" target="_blank" rel="noopener noreferrer">
                    <span class="material-symbols-rounded">inventory_2</span>
                    <span>Diseña tu empaque</span>
                    <span class="mobile-nav-external">↗</span>
                </a>
                <a href="https://docs.google.com/forms/d/e/1FAIpQLScfJWsXOj-BAAgG9tmxYFf4QEuOimOmJJPsF4bnxmquUParZA/viewform?usp=sharing&ouid=102976851646670750896" 
                   class="mobile-dropdown-link" target="_blank" rel="noopener noreferrer">
                    <span class="material-symbols-rounded">assignment</span>
                    <span>Banco de iniciativas</span>
                    <span class="mobile-nav-external">↗</span>
                </a>
                <a href="https://pinnovacion4.wixsite.com/alico---innovacion" target="_blank" rel="noopener noreferrer" class="mobile-dropdown-link">
                    <span class="material-symbols-rounded">article</span>
                    <span>Noticias</span>
                </a>
                <a href="#" class="mobile-dropdown-link" id="mobileDesignThinkingLink">
                    <span class="material-symbols-rounded">psychology</span>
                    <span>Design Thinking</span>
                </a>
            </div>
        </div>

        <!-- Blog -->
        <a href="https://pinnovacion4.wixsite.com/alico---innovacion" target="_blank" rel="noopener noreferrer" class="mobile-nav-item">
            <div class="material-symbols-rounded mobile-nav-icon">article</div>
            <div class="mobile-nav-title">Blog</div>
        </a>
    </div>
</nav>

<!-- Script para configurar rutas dinámicamente -->
<script>
(function() {
    'use strict';
    
    // Detectar si estamos en una subcarpeta
    const currentPath = window.location.pathname;
    const isInPagesFolder = currentPath.includes('/pages/');
    const isInSubfolder = currentPath.split('/').length > 3; // Para subcarpetas como recursos-audiovisuales
    
    // Definir el prefijo de ruta base
    let basePath = '';
    if (isInSubfolder) {
        basePath = '../../'; // Para páginas en subcarpetas como resources-audiovisuales/
    } else if (isInPagesFolder) {
        basePath = '../'; // Para páginas directamente en /pages/
    }
    
    console.log('🔗 Configurando rutas del header...');
    console.log('📁 Ruta actual:', currentPath);
    console.log('📁 Está en pages:', isInPagesFolder);
    console.log('📁 Está en subcarpeta:', isInSubfolder);
    console.log('📁 Base path:', basePath || 'raíz');
    
    // Configurar rutas dinámicamente
    function setupDynamicPaths() {
        // Logo y enlace principal
        const logoLink = document.getElementById('logoLink');
        const logoImage = document.getElementById('logoImage');
        if (logoLink) logoLink.href = basePath + 'index.html';
        if (logoImage) logoImage.src = basePath + 'assets/images/Ali_head.png';
        
        // Enlaces principales del desktop nav
        const sgiLink = document.getElementById('sgiLink');
        const iaLink = document.getElementById('iaLink');
        const recursosLink = document.getElementById('recursosLink');
        const iniciativasLink = document.getElementById('iniciativasLink');
        
        if (sgiLink) sgiLink.href = basePath + 'pages/generalidades-sgi.html';
        if (iaLink) iaLink.href = basePath + 'pages/inteligencias-artificiales.html';
        if (recursosLink) recursosLink.href = basePath + 'pages/recursos-audiovisuales.html';
        if (iniciativasLink) iniciativasLink.href = basePath + 'pages/iniciativas.html';
        
        // Enlaces del dropdown de recursos
        const videosFotosLink = document.getElementById('videosFotosLink');
        const embajadorLink = document.getElementById('embajadorLink');
        const podcastLink = document.getElementById('podcastLink');
        
        if (videosFotosLink) videosFotosLink.href = basePath + 'pages/videos-fotos.html';
        if (embajadorLink) embajadorLink.href = basePath + 'pages/embajador-ali.html';
        if (podcastLink) podcastLink.href = basePath + 'pages/recursos-audiovisuales/podcast.html';
        
        // Enlace de Design Thinking en dropdown de iniciativas
        const designThinkingLink = document.getElementById('designThinkingLink');
        if (designThinkingLink) designThinkingLink.href = basePath + 'pages/design-thinking.html';
        
        // Enlaces del menú móvil
        const mobileSgiLink = document.getElementById('mobileSgiLink');
        const mobileIaLink = document.getElementById('mobileIaLink');
        const mobileVideosFotosLink = document.getElementById('mobileVideosFotosLink');
        const mobileEmbajadorLink = document.getElementById('mobileEmbajadorLink');
        const mobilePodcastLink = document.getElementById('mobilePodcastLink');
        const mobileDesignThinkingLink = document.getElementById('mobileDesignThinkingLink');
        
        if (mobileSgiLink) mobileSgiLink.href = basePath + 'pages/generalidades-sgi.html';
        if (mobileIaLink) mobileIaLink.href = basePath + 'pages/inteligencias-artificiales.html';
        if (mobileVideosFotosLink) mobileVideosFotosLink.href = basePath + 'pages/videos-fotos.html';
        if (mobileEmbajadorLink) mobileEmbajadorLink.href = basePath + 'pages/embajador-ali.html';
        if (mobilePodcastLink) mobilePodcastLink.href = basePath + 'pages/recursos-audiovisuales/podcast.html';
        if (mobileDesignThinkingLink) mobileDesignThinkingLink.href = basePath + 'pages/design-thinking.html';
        
        console.log('✅ Rutas del header configuradas correctamente');
    }
    
    // Ejecutar configuración cuando el DOM esté listo
    if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', setupDynamicPaths);
    } else {
        setupDynamicPaths();
    }
    
    // También ejecutar cuando los componentes se carguen
    window.addEventListener('components-loaded', function() {
        setTimeout(setupDynamicPaths, 100); // Pequeño delay para asegurar que los elementos existan
    });
})();
</script>
