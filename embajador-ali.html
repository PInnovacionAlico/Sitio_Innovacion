<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Embajador Ali - Alico</title>

    <!-- Favicon -->
    <link rel="icon" href="../assets/images/Ali_head.png" type="image/png">
    <link rel="apple-touch-icon" href="../assets/images/Ali_head.png">

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Zilla+Slab:ital,wght@0,300;0,400;0,500;0,600;0,700;1,300;1,400;1,500;1,600;1,700&family=Work+Sans:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap" rel="stylesheet">
    
    <!-- Material Icons -->
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" rel="stylesheet">
    
    <!-- Estilos principales -->
    <link rel="stylesheet" href="../assets/css/styles.css">
    <link rel="stylesheet" href="../assets/css/accessibility.css">
    <link rel="stylesheet" href="../components/components.css">
    
    <!-- CSS cr√≠tico inline -->
    <style>
        /* === CR√çTICO: Anti-FOUC === */
        body { opacity: 0; transition: opacity 0.3s ease; }
        body.components-loaded { opacity: 1; }
        
        /* === CR√çTICO: Placeholder header === */
        .header-placeholder {
            height: 80px; background: var(--amarillo-oro); position: fixed; top: 0; left: 0; right: 0; z-index: 1000;
            display: flex; align-items: center; justify-content: center; color: white; font-weight: bold; font-family: 'Work Sans', sans-serif;
        }
        body.components-loaded .header-placeholder { display: none; }
        
        /* === CR√çTICO: Bot√≥n accesibilidad === */
        .accessibility-toggle {
            position: fixed; top: 160px; right: 20px; background: linear-gradient(135deg, var(--verde-natura) 0%, var(--verde-natura-80) 100%);
            color: white; width: 60px; height: 60px; border-radius: 50%; border: none; display: flex; align-items: center; justify-content: center;
            cursor: pointer; font-size: 28px; box-shadow: 0 4px 20px rgba(113, 179, 56, 0.4); z-index: 999; transition: all 0.3s ease;
        }
        .accessibility-toggle:hover { transform: scale(1.1); }
        
        /* === RESPONSIVE CR√çTICO === */
        @media (max-width: 768px) {
            .accessibility-toggle { top: 120px; right: 16px; width: 56px; height: 56px; font-size: 26px; }
            .header-placeholder { height: 70px; font-size: 14px; }
        }
        @media (max-width: 480px) {
            .accessibility-toggle { top: 100px; right: 12px; width: 52px; height: 52px; font-size: 24px; }
            .header-placeholder { height: 65px; font-size: 13px; }
        }
    </style>
</head>
<body>
    <!-- Placeholder temporal para header -->
    <div class="header-placeholder">
        üöÄ Cargando Alico...
    </div>

    <!-- Los componentes se cargar√°n autom√°ticamente aqu√≠ -->
    <!-- Header, men√∫ m√≥vil, bot√≥n de accesibilidad, bot√≥n back-to-top y footer -->

    <!-- Contenido principal de la p√°gina embajador ali -->
    <main id="main-content">
        <!-- Breadcrumb -->
        <nav class="breadcrumb" aria-label="Navegaci√≥n de ruta">
            <div class="breadcrumb-nav">
                <a href="recursos-audiovisuales.html" class="breadcrumb-link">Recursos</a>
                <span class="breadcrumb-separator">‚Ä∫</span>
                <span class="breadcrumb-current" aria-current="page">Embajador Ali</span>
            </div>
        </nav>
        
        <!-- Banner principal de la p√°gina -->
        <section class="banner-section">
            <div class="banner-content banner-ali">
                EMBAJADOR ALI
            </div>
        </section>

        <!-- Visualizador 3D de Ali con Sketchfab -->
        <section class="ali-3d-container" style="background: linear-gradient(135deg, var(--azul-claro) 0%, var(--azul-claro-80) 100%); border-radius: var(--border-radius-xl); padding: var(--spacing-xl); margin-bottom: var(--spacing-xl); color: var(--blanco); position: relative; overflow: hidden; box-shadow: var(--shadow-lg);">
            <!-- Efecto de brillo sutil -->
            <div style="content: ''; position: absolute; top: 0; left: 0; right: 0; bottom: 0; background: linear-gradient(135deg, rgba(255,255,255,0.1) 0%, transparent 100%); pointer-events: none; z-index: 1;"></div>
            
            <div class="ali-3d-viewer" style="width: 100%; height: 500px; border-radius: var(--border-radius-lg); overflow: hidden; position: relative; background: linear-gradient(45deg, #1e3a8a 0%, #3b82f6 100%); border: 3px solid rgba(255,255,255,0.2); box-shadow: var(--shadow-md); z-index: 2;">
                <!-- Embed de Sketchfab personalizado -->
                <div class="sketchfab-embed-wrapper" style="width: 100%; height: 100%; position: relative; border-radius: var(--border-radius-lg); overflow: hidden;">
                    <iframe 
                        title="Modelo 3D de Ali - Embajador de Innovaci√≥n Alico" 
                        frameborder="0" 
                        allowfullscreen 
                        mozallowfullscreen="true" 
                        webkitallowfullscreen="true" 
                        allow="autoplay; fullscreen; xr-spatial-tracking" 
                        xr-spatial-tracking 
                        execution-while-out-of-viewport 
                        execution-while-not-rendered 
                        web-share 
                        src="https://sketchfab.com/models/7f1d0964d4ff4198b699ac335db16188/embed?autostart=1&ui_theme=dark&ui_infos=0&ui_watermark=0&ui_help=0&ui_settings=0&ui_vr=0&ui_fullscreen=1&ui_annotations=0&ui_stop=0&ui_inspector=0&ui_ar=0&ui_ar_help=0&ui_ar_qr=0&ui_loading=0&preload=1&camera=0&ui_hint=0&ui_controls=1&ui_stop=0&transparent=0&autospin=0.2&orbit_constraint_pan=1"
                        style="width: 100%; height: 100%; border: none; border-radius: var(--border-radius-lg);">
                    </iframe>
                </div>
                
                <!-- Controles personalizados superpuestos -->
                <div style="position: absolute; top: 15px; right: 15px; display: flex; gap: 10px; z-index: 10;">
                    <button onclick="toggleFullscreen()" aria-label="Pantalla completa" title="Pantalla completa" style="background: rgba(255,255,255,0.95); border: none; border-radius: 50%; width: 45px; height: 45px; display: flex; align-items: center; justify-content: center; cursor: pointer; transition: all 0.3s ease; color: var(--azul-novo); box-shadow: var(--shadow-md); backdrop-filter: blur(10px);">
                        <span class="material-symbols-rounded">fullscreen</span>
                    </button>
                    <button onclick="openInSketchfab()" aria-label="Abrir en Sketchfab" title="Ver en Sketchfab" style="background: rgba(255,255,255,0.95); border: none; border-radius: 50%; width: 45px; height: 45px; display: flex; align-items: center; justify-content: center; cursor: pointer; transition: all 0.3s ease; color: var(--azul-novo); box-shadow: var(--shadow-md); backdrop-filter: blur(10px);">
                        <span class="material-symbols-rounded">open_in_new</span>
                    </button>
                </div>
                
                <!-- Informaci√≥n del modelo -->
                <div style="position: absolute; bottom: 15px; left: 15px; background: rgba(0,0,0,0.8); color: white; padding: 12px 18px; border-radius: 25px; font-size: 14px; backdrop-filter: blur(10px); z-index: 10; border: 1px solid rgba(255,255,255,0.2); box-shadow: var(--shadow-sm);">
                    <div id="aliInfo">üñ±Ô∏è Arrastra para rotar ‚Ä¢ üñ≤Ô∏è Rueda para zoom ‚Ä¢ üéÆ Explora Ali en 3D</div>
                </div>
            </div>
            
            <div style="margin-top: var(--spacing-xl); text-align: center; z-index: 2; position: relative;">
                <h3 style="font-size: 1.8em; margin-bottom: var(--spacing-md); font-family: 'Zilla Slab', serif; font-weight: 600;">Conoce a Ali en 3D</h3>
                <p style="font-size: 1.1em; line-height: 1.6; max-width: 600px; margin: 0 auto; opacity: 0.95;">Explora el modelo tridimensional de Ali, tu compa√±ero de innovaci√≥n. Usa el mouse para rotarlo, el scroll para hacer zoom y descubre cada detalle de su dise√±o. Ali est√° aqu√≠ para ayudarte a descubrir nuevas ideas y soluciones creativas en el mundo de los empaques sostenibles.</p>
            </div>
        </section>

        <!-- Informaci√≥n adicional sobre Ali -->
        <section class="model-card">
            <h2>Acerca de Ali</h2>
            <p>Ali es m√°s que un simple asistente: es tu compa√±ero en el viaje hacia la innovaci√≥n. Dise√±ado para inspirar creatividad y facilitar el descubrimiento de nuevas perspectivas, Ali combina la sabidur√≠a de la experiencia con la frescura de las ideas emergentes.</p>
            <p>Su nombre representa <strong>A</strong>sistente <strong>L</strong>√≠der en <strong>I</strong>nnovaci√≥n, y su misi√≥n es acompa√±arte en cada paso del proceso creativo, desde la ideaci√≥n hasta la implementaci√≥n de soluciones revolucionarias en el mundo del empaque sostenible.</p>
        </section>
    </main>

    <!-- Scripts esenciales -->
    <script src="../assets/js/scripts.js"></script>
    <script src="../assets/js/component-loader.js"></script>
    <script src="../assets/js/accessibility.js"></script>
    
    <!-- JavaScript espec√≠fico para p√°gina de Ali -->
    <script>
        // Funci√≥n para pantalla completa del iframe
        function toggleFullscreen() {
            const iframe = document.querySelector('.sketchfab-embed-wrapper iframe');
            if (iframe) {
                if (iframe.requestFullscreen) {
                    iframe.requestFullscreen();
                } else if (iframe.webkitRequestFullscreen) {
                    iframe.webkitRequestFullscreen();
                } else if (iframe.mozRequestFullScreen) {
                    iframe.mozRequestFullScreen();
                } else if (iframe.msRequestFullscreen) {
                    iframe.msRequestFullscreen();
                }
            }
        }

        // Funci√≥n para abrir en Sketchfab
        function openInSketchfab() {
            window.open('https://sketchfab.com/3d-models/modelo-3d-de-personaje-drakoza-fb2812fb1a274fe09c0cc1442098a7f1', '_blank');
        }

        // Verificaci√≥n de archivos cargados
        function verifyFilesLoaded() {
            console.log('üîç Verificando archivos cargados...');
            
            // Verificar CSS
            const stylesheets = document.styleSheets;
            let cssFiles = [];
            for (let i = 0; i < stylesheets.length; i++) {
                try {
                    if (stylesheets[i].href) {
                        cssFiles.push(stylesheets[i].href.split('/').pop());
                    }
                } catch (e) {
                    // Ignorar errores de CORS
                }
            }
            console.log('üìÅ Archivos CSS cargados:', cssFiles);
            
            // Verificar JavaScript
            if (typeof flipCard === 'function') {
                console.log('‚úÖ Funci√≥n flipCard disponible');
            } else {
                console.log('‚ö†Ô∏è Funci√≥n flipCard no disponible (normal en esta p√°gina)');
            }
            
            // Verificar variables CSS
            const testElement = document.createElement('div');
            testElement.style.position = 'absolute';
            testElement.style.left = '-9999px';
            document.body.appendChild(testElement);
            
            const computedStyle = getComputedStyle(testElement);
            const testVars = [
                '--amarillo-oro',
                '--azul-claro',
                '--verde-natura',
                '--border-radius-lg',
                '--spacing-xl',
                '--shadow-lg'
            ];
            
            testVars.forEach(varName => {
                try {
                    const value = computedStyle.getPropertyValue(varName);
                    if (value) {
                        console.log(`‚úÖ Variable CSS ${varName}: ${value}`);
                    } else {
                        console.warn(`‚ö†Ô∏è Variable CSS ${varName} no encontrada`);
                    }
                } catch (e) {
                    console.warn(`‚ö†Ô∏è Error al verificar variable CSS ${varName}:`, e);
                }
            });
            
            document.body.removeChild(testElement);
        }

        // Inicializaci√≥n espec√≠fica para Ali
        document.addEventListener('DOMContentLoaded', function() {
            // Verificar breadcrumb
            const breadcrumb = document.querySelector('.breadcrumb');
            if (breadcrumb) {
                console.log('‚úÖ Breadcrumb encontrado y visible');
                console.log('üìç Ruta del breadcrumb:', breadcrumb.textContent.trim());
            } else {
                console.warn('‚ö†Ô∏è Breadcrumb no encontrado');
            }
            
            // Verificar archivos cargados
            verifyFilesLoaded();
            
            // Marcar componentes como cargados
            setTimeout(() => {
                document.body.classList.add('components-loaded');
                console.log('‚úÖ P√°gina Embajador Ali inicializada con sistema de componentes');
            }, 800);

            // Mensaje de bienvenida para Ali
            setTimeout(() => {
                const info = document.getElementById('aliInfo');
                if (info) {
                    info.innerHTML = 'üéâ ¬°Ali est√° listo! ‚Ä¢ Explora su modelo 3D interactivo';
                    setTimeout(() => {
                        info.innerHTML = 'üñ±Ô∏è Arrastra para rotar ‚Ä¢ üñ≤Ô∏è Rueda para zoom ‚Ä¢ üéÆ Explora Ali en 3D';
                    }, 3000);
                }
            }, 2000);

            // Efecto de carga para el iframe de Sketchfab
            const iframe = document.querySelector('.sketchfab-embed-wrapper iframe');
            if (iframe) {
                iframe.addEventListener('load', function() {
                    console.log('Modelo 3D de Ali cargado exitosamente');
                    
                    // Agregar efecto de aparici√≥n suave
                    iframe.style.opacity = '0';
                    iframe.style.transition = 'opacity 0.5s ease';
                    
                    setTimeout(() => {
                        iframe.style.opacity = '1';
                    }, 500);
                });
            }

            // Hover effects para controles
            const controlBtns = document.querySelectorAll('button[onclick*="toggleFullscreen"], button[onclick*="openInSketchfab"]');
            controlBtns.forEach(btn => {
                btn.addEventListener('mouseenter', function() {
                    this.style.transform = 'scale(1.1) translateZ(0)';
                    this.style.background = 'white';
                });
                
                btn.addEventListener('mouseleave', function() {
                    this.style.transform = 'scale(1) translateZ(0)';
                    this.style.background = 'rgba(255,255,255,0.95)';
                });
            });
        });

        // Listener para cuando los componentes est√©n cargados
        window.addEventListener('components-loaded', function() {
            console.log('üéâ Evento: Todos los componentes han sido cargados en Embajador Ali');
        });
    </script>
</body>
</html>
