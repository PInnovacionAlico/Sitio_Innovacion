<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Generalidades SGI - Alico</title>

    <!-- Favicon -->
    <link rel="icon" href="../assets/images/Ali_head.png" type="image/png">
    <link rel="apple-touch-icon" href="../assets/images/Ali_head.png">

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Zilla+Slab:ital,wght@0,300;0,400;0,500;0,600;0,700;1,300;1,400;1,500;1,600;1,700&family=Work+Sans:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap" rel="stylesheet">
    
    <!-- Material Icons -->
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" rel="stylesheet">
    
    <!-- Estilos principales -->
    <link rel="stylesheet" href="../assets/css/styles.css">
    <link rel="stylesheet" href="../assets/css/accessibility.css">
    <link rel="stylesheet" href="../components/components.css">
    
    <!-- CSS crítico inline -->
    <style>
        /* === CRÍTICO: Anti-FOUC === */
        body { opacity: 0; transition: opacity 0.3s ease; }
        body.components-loaded { opacity: 1; }
        
        /* === CRÍTICO: Placeholder header === */
        .header-placeholder {
            height: 80px; background: var(--amarillo-oro); position: fixed; top: 0; left: 0; right: 0; z-index: 1000;
            display: flex; align-items: center; justify-content: center; color: white; font-weight: bold; font-family: 'Work Sans', sans-serif;
        }
        body.components-loaded .header-placeholder { display: none; }
        
        /* === CRÍTICO: Botón accesibilidad === */
        .accessibility-toggle {
            position: fixed; top: 160px; right: 20px; background: linear-gradient(135deg, var(--verde-natura) 0%, var(--verde-natura-80) 100%);
            color: white; width: 60px; height: 60px; border-radius: 50%; border: none; display: flex; align-items: center; justify-content: center;
            cursor: pointer; font-size: 28px; box-shadow: 0 4px 20px rgba(113, 179, 56, 0.4); z-index: 999; transition: all 0.3s ease;
        }
        .accessibility-toggle:hover { transform: scale(1.1); }
        
        /* === ESPECÍFICO PARA ALI SGI === */
        .ali-sgi-container {
            width: 150px;
            height: 200px;
                            background-image: url('../assets/images/Ali_2.png');
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            border-radius: var(--border-radius-lg);
            box-shadow: var(--shadow-md);
            margin: 0 auto;
            transition: transform 0.3s ease;
            overflow: hidden;
            position: relative;
        }

        .ali-sgi-container:hover {
            transform: scale(1.05);
        }

        /* Fallback para cuando la imagen no carga */
        .ali-sgi-fallback {
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, var(--gris-claro) 0%, var(--gris-medio) 100%);
            display: none;
            align-items: center;
            justify-content: center;
            font-size: 14px;
            color: var(--gris-oscuro);
        }
        
        /* === RESPONSIVE CRÍTICO === */
        @media (max-width: 768px) {
            .accessibility-toggle { top: 120px; right: 16px; width: 56px; height: 56px; font-size: 26px; }
            .header-placeholder { height: 70px; font-size: 14px; }
            .ali-sgi-container { width: 120px; height: 160px; }
        }
        @media (max-width: 480px) {
            .accessibility-toggle { top: 100px; right: 12px; width: 52px; height: 52px; font-size: 24px; }
            .header-placeholder { height: 65px; font-size: 13px; }
            .ali-sgi-container { width: 100px; height: 130px; }
        }
    </style>
</head>
<body>
    <!-- Placeholder temporal para header -->
    <div class="header-placeholder">
        🚀 Cargando Alico...
    </div>

    <!-- Los componentes se cargarán automáticamente aquí -->
    <!-- Header, menú móvil, botón de accesibilidad, botón back-to-top y footer -->

    <!-- Contenido principal de la página SGI -->
    <main id="main-content">
        <!-- Banner principal de la página -->
        <section class="banner-section">
            <div class="banner-content banner-sgi">
                SISTEMA DE GESTIÓN<br>DE LA INNOVACIÓN (SGI)
            </div>
        </section>

        <!-- Información sobre el SGI -->
        <section class="model-card">
            <h2>ACERCA DEL SGI</h2>
            <p>En Alico, creemos que la innovación es el motor del cambio y la clave para ofrecer soluciones de empaque cada vez más eficientes, sostenibles y alineadas con las necesidades del mercado. Nuestro Sistema de Gestión de Innovación (SGI) nos permite estructurar, medir y optimizar nuestros procesos de innovación para transformar ideas en soluciones reales.</p>
        </section>

        <!-- Sección central con Ali y call to action -->
        <section style="text-align: center; margin: 40px 0;">
            <div style="display: inline-block; position: relative;">
                <div class="ali-sgi-container" aria-label="Imagen de Ali, embajador de innovación de Alico">
                    <div class="ali-sgi-fallback">
                        <span>Ali</span>
                    </div>
                </div>
                <div style="background-color: #f59e0b; color: white; padding: 15px 30px; border-radius: 25px; margin-top: 20px; font-weight: bold; font-size: 1.2em;">
                    FORTALEZAS DE<br>NUESTRO SGI
                </div>
            </div>
            <div style="font-size: 2em; margin-top: 20px; color: white;">
                <span class="material-symbols-rounded" style="font-size: 2em; vertical-align: middle;">refresh</span> 
                ¡Dale la vuelta a las tarjetas!
            </div>
        </section>

        <!-- Grid de tarjetas flip con las fortalezas del SGI -->
        <section class="sgi-grid">
            <!-- Tarjeta 1: Ideación -->
            <article class="flip-card" onclick="flipCard(this)" tabindex="0" role="button" aria-label="Voltear tarjeta de Ideación">
                <div class="flip-card-inner">
                    <div class="flip-card-front">
                        <span class="material-symbols-rounded flip-icon">lightbulb</span>
                    </div>
                    <div class="flip-card-back">
                        <h3>Ideación</h3>
                        <p>Fomentamos la creatividad y la generación de ideas innovadoras en todos los niveles de la organización.</p>
                    </div>
                </div>
            </article>

            <!-- Tarjeta 2: Investigación -->
            <article class="flip-card" onclick="flipCard(this)" tabindex="0" role="button" aria-label="Voltear tarjeta de Investigación">
                <div class="flip-card-inner">
                    <div class="flip-card-front">
                        <span class="material-symbols-rounded flip-icon">science</span>
                    </div>
                    <div class="flip-card-back">
                        <h3>Investigación</h3>
                        <p>Desarrollamos investigación aplicada para crear soluciones de empaque más eficientes y sostenibles.</p>
                    </div>
                </div>
            </article>

            <!-- Tarjeta 3: Desarrollo -->
            <article class="flip-card" onclick="flipCard(this)" tabindex="0" role="button" aria-label="Voltear tarjeta de Desarrollo">
                <div class="flip-card-inner">
                    <div class="flip-card-front">
                        <span class="material-symbols-rounded flip-icon">rocket_launch</span>
                    </div>
                    <div class="flip-card-back">
                        <h3>Desarrollo</h3>
                        <p>Transformamos las ideas en prototipos y productos viables para el mercado.</p>
                    </div>
                </div>
            </article>

            <!-- Tarjeta 4: Implementación -->
            <article class="flip-card" onclick="flipCard(this)" tabindex="0" role="button" aria-label="Voltear tarjeta de Implementación">
                <div class="flip-card-inner">
                    <div class="flip-card-front">
                        <span class="material-symbols-rounded flip-icon">business</span>
                    </div>
                    <div class="flip-card-back">
                        <h3>Implementación</h3>
                        <p>Llevamos las innovaciones al mercado de manera eficiente y escalable.</p>
                    </div>
                </div>
            </article>

            <!-- Tarjeta 5: Mejora Continua -->
            <article class="flip-card" onclick="flipCard(this)" tabindex="0" role="button" aria-label="Voltear tarjeta de Mejora Continua">
                <div class="flip-card-inner">
                    <div class="flip-card-front">
                        <span class="material-symbols-rounded flip-icon">refresh</span>
                    </div>
                    <div class="flip-card-back">
                        <h3>Mejora Continua</h3>
                        <p>Evaluamos y optimizamos constantemente nuestros procesos de innovación.</p>
                    </div>
                </div>
            </article>

            <!-- Tarjeta 6: Sostenibilidad -->
            <article class="flip-card" onclick="flipCard(this)" tabindex="0" role="button" aria-label="Voltear tarjeta de Sostenibilidad">
                <div class="flip-card-inner">
                    <div class="flip-card-front">
                        <span class="material-symbols-rounded flip-icon">eco</span>
                    </div>
                    <div class="flip-card-back">
                        <h3>Sostenibilidad</h3>
                        <p>Integramos criterios de sostenibilidad en cada etapa del proceso de innovación.</p>
                    </div>
                </div>
            </article>

            <!-- Tarjeta 7: Impacto Global -->
            <article class="flip-card" onclick="flipCard(this)" tabindex="0" role="button" aria-label="Voltear tarjeta de Impacto Global">
                <div class="flip-card-inner">
                    <div class="flip-card-front">
                        <span class="material-symbols-rounded flip-icon">public</span>
                    </div>
                    <div class="flip-card-back">
                        <h3>Impacto Global</h3>
                        <p>Creamos soluciones que generan valor para nuestros clientes y la sociedad.</p>
                    </div>
                </div>
            </article>

            <!-- Tarjeta 8: Colaboración -->
            <article class="flip-card" onclick="flipCard(this)" tabindex="0" role="button" aria-label="Voltear tarjeta de Colaboración">
                <div class="flip-card-inner">
                    <div class="flip-card-front">
                        <span class="material-symbols-rounded flip-icon">groups</span>
                    </div>
                    <div class="flip-card-back">
                        <h3>Colaboración</h3>
                        <p>Trabajamos en red con partners, universidades y centros de investigación.</p>
                    </div>
                </div>
            </article>
        </section>
    </main>

    <!-- Scripts esenciales -->
    <script src="../assets/js/scripts.js"></script>
    <script src="../assets/js/component-loader.js"></script>
    <script src="../assets/js/accessibility.js"></script>
    
    <!-- JavaScript específico para página SGI -->
    <script>
        // Función de prueba local para flip cards
        function testFlipCard(card) {
            console.log('🔄 Función de prueba flipCard llamada para:', card);
            
            if (!card || !card.classList) {
                console.error('❌ Elemento de tarjeta inválido');
                return;
            }
            
            // Verificar si ya está volteada
            const isFlipped = card.classList.contains('flipped');
            console.log(`📋 Estado actual de la tarjeta: ${isFlipped ? 'volteada' : 'no volteada'}`);
            
            // Limpiar cualquier transformación previa
            card.style.transform = '';
            console.log('🧹 Transformación previa limpiada');
            
            // Voltear la tarjeta
            card.classList.toggle('flipped');
            const newState = card.classList.contains('flipped');
            console.log(`🔄 Tarjeta ${newState ? 'volteada' : 'desvolteada'}`);
            
            // Verificar que la clase se aplicó correctamente
            console.log('📋 Clases actuales de la tarjeta:', card.className);
            
            // Verificar estilos CSS aplicados
            const computedStyle = getComputedStyle(card);
            console.log('🎨 Estilos CSS aplicados:', {
                transform: computedStyle.transform,
                transition: computedStyle.transition
            });
            
            // Verificar el elemento interno
            const inner = card.querySelector('.flip-card-inner');
            if (inner) {
                const innerStyle = getComputedStyle(inner);
                console.log('🔄 Estilos del elemento interno:', {
                    transform: innerStyle.transform,
                    transition: innerStyle.transition
                });
            }
        }

        document.addEventListener('DOMContentLoaded', function() {
            console.log('🚀 DOM cargado, iniciando verificación...');
            
            // Verificar que la función flipCard esté disponible
            if (typeof flipCard === 'function') {
                console.log('✅ Función flipCard global disponible');
            } else {
                console.error('❌ Función flipCard global no disponible');
            }
            
            if (typeof testFlipCard === 'function') {
                console.log('✅ Función testFlipCard local disponible');
            } else {
                console.error('❌ Función testFlipCard local no disponible');
            }

            // Marcar componentes como cargados
            setTimeout(() => {
                document.body.classList.add('components-loaded');
                console.log('✅ Página Generalidades SGI inicializada con sistema de componentes');
            }, 800);

            // Manejo específico para la imagen de Ali en SGI
            const aliContainer = document.querySelector('.ali-sgi-container');
            const aliFallback = document.querySelector('.ali-sgi-fallback');
            
            if (aliContainer && aliFallback) {
                // Verificar si la imagen se carga correctamente
                const testImg = new Image();
                testImg.onload = function() {
                    console.log('✅ Imagen de Ali SGI cargada exitosamente');
                    aliContainer.style.opacity = '1';
                    aliFallback.style.display = 'none';
                };
                testImg.onerror = function() {
                    console.warn('⚠️ Error al cargar imagen de Ali SGI, usando fallback');
                    aliContainer.style.backgroundImage = 'none';
                    aliFallback.style.display = 'flex';
                };
                testImg.src = '../assets/images/Ali_2.png';
                
                // Inicializar con transición suave
                aliContainer.style.transition = 'opacity 0.3s ease, transform 0.3s ease';
                
                // Precargar la imagen
                const preloadImg = new Image();
                preloadImg.src = '../assets/images/Ali_2.png';
            }

            // Agregar event listeners adicionales para las tarjetas flip
            const flipCards = document.querySelectorAll('.flip-card');
            console.log(`🎯 Encontradas ${flipCards.length} tarjetas flip`);
            
            flipCards.forEach((card, index) => {
                console.log(`🎴 Inicializando tarjeta flip ${index + 1}:`, card);
                
                // Event listener de clic como respaldo
                card.addEventListener('click', function(e) {
                    e.preventDefault();
                    console.log(`🖱️ Clic en tarjeta ${index + 1}`);
                    
                    // Probar ambas funciones
                    if (typeof flipCard === 'function') {
                        console.log('🔄 Llamando función flipCard global');
                        flipCard(this);
                    } else {
                        console.warn('⚠️ Función flipCard global no disponible, usando local');
                        testFlipCard(this);
                    }
                });
                
                // Event listener de teclado para accesibilidad
                card.addEventListener('keydown', function(e) {
                    if (e.key === 'Enter' || e.key === ' ') {
                        e.preventDefault();
                        console.log(`⌨️ Tecla presionada en tarjeta ${index + 1}: ${e.key}`);
                        
                        if (typeof flipCard === 'function') {
                            flipCard(this);
                        } else {
                            testFlipCard(this);
                        }
                    }
                });
                
                // Verificar estilos iniciales
                const computedStyle = getComputedStyle(card);
                console.log(`🎨 Estilos iniciales de tarjeta ${index + 1}:`, {
                    perspective: computedStyle.perspective,
                    transform: computedStyle.transform,
                    transition: computedStyle.transition
                });
                
                console.log(`✅ Tarjeta flip ${index + 1} inicializada`);
            });

            console.log('🎨 Página SGI con sistema de componentes cargada exitosamente');
        });

        // Listener para cuando los componentes estén cargados
        window.addEventListener('components-loaded', function() {
            console.log('🎉 Evento: Todos los componentes han sido cargados en SGI');
        });
        
        // Función de prueba local como respaldo
        function localFlipCard(card) {
            console.log('🔄 Función local flipCard llamada para:', card);
            
            if (!card || !card.classList) {
                console.error('❌ Elemento de tarjeta inválido');
                return;
            }
            
            // Verificar si ya está volteada
            const isFlipped = card.classList.contains('flipped');
            console.log(`📋 Estado actual de la tarjeta: ${isFlipped ? 'volteada' : 'no volteada'}`);
            
            // Limpiar cualquier transformación previa
            card.style.transform = '';
            console.log('🧹 Transformación previa limpiada');
            
            // Voltear la tarjeta
            card.classList.toggle('flipped');
            const newState = card.classList.contains('flipped');
            console.log(`🔄 Tarjeta ${newState ? 'volteada' : 'desvolteada'}`);
            
            // Verificar que la clase se aplicó correctamente
            console.log('📋 Clases actuales de la tarjeta:', card.className);
            
            // Verificar estilos CSS aplicados
            const computedStyle = getComputedStyle(card);
            console.log('🎨 Estilos CSS aplicados:', {
                transform: computedStyle.transform,
                transition: computedStyle.transition
            });
            
            // Verificar el elemento interno
            const inner = card.querySelector('.flip-card-inner');
            if (inner) {
                const innerStyle = getComputedStyle(inner);
                console.log('🔄 Estilos del elemento interno:', {
                    transform: innerStyle.transform,
                    transition: innerStyle.transition
                });
            }
            
            console.log(`✅ Tarjeta ${isFlipped ? 'desvolteada' : 'volteada'} exitosamente con función local`);
        }
        
        // Verificar que las tarjetas flip funcionen después de un delay
        setTimeout(() => {
            console.log('🔍 Verificación tardía de tarjetas flip...');
            const flipCards = document.querySelectorAll('.flip-card');
            console.log(`🎯 Encontradas ${flipCards.length} tarjetas flip en verificación tardía`);
            
            flipCards.forEach((card, index) => {
                // Agregar event listener adicional como respaldo
                card.addEventListener('click', function(e) {
                    console.log(`🖱️ Clic adicional en tarjeta ${index + 1}`);
                    if (typeof flipCard === 'function') {
                        flipCard(this);
                    } else {
                        console.warn('⚠️ Función flipCard global no disponible, usando local');
                        localFlipCard(this);
                    }
                });
            });
        }, 2000);
    </script>
</body>
</html>
